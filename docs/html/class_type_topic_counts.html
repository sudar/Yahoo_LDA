<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Y!LDA: TypeTopicCounts Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>TypeTopicCounts Class Reference</h1><!-- doxytag: class="TypeTopicCounts" -->
<p><code>#include &lt;<a class="el" href="_type_topic_counts_8h_source.html">TypeTopicCounts.h</a>&gt;</code></p>

<p><a href="class_type_topic_counts-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a461c45af231cb3a4c6c116eb9daa5ee5">TypeTopicCounts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a199efa3085b514a0e155e24d807fe749">TypeTopicCounts</a> (word_t num_words, topic_t <a class="el" href="class_type_topic_counts.html#a11093a2580f604279b5799ef494a8e66">num_topics</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a96bfd72683e9d117836c6118e62f2957">~TypeTopicCounts</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a1e51d6aa7ceb480b3b1e1a2e598a2486">initialize_from_docs</a> (string wfname, string tfname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#adc1724643b2210fce240202fdfc5144c">verify_header</a> (<a class="el" href="class_document_reader.html">DocumentReader</a> &amp;doc_rdr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a54768567ed8fbf4cd34f2ff7a5222190">initialize_from_string</a> (word_t word, string &amp;counts)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a71ca87bf1f9cf612323f792594d3de29">initialize_from_dump</a> (string fname, <a class="el" href="class_word_index_dictionary.html">WordIndexDictionary</a> *local_dict=NULL, <a class="el" href="class_word_index_dictionary.html">WordIndexDictionary</a> *global_dict=NULL, size_t offset=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#ae8c2f500e74a2f6a6bb1f6e830c66142">initialize_from_ttc</a> (<a class="el" href="class_type_topic_counts.html">TypeTopicCounts</a> *ttc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#af81d800d17306cb9f53e5bfe0ba49094">estimate_alphas</a> (double *alphas, double &amp;alpha_sum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#ad5b4a0efaccdf397d696ef3a59ff5bc5">dump</a> (string fname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">topic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#af6811be58a729eed6909236f0c22c554">get_counts</a> (word_t word, <a class="el" href="struct_topic_counts.html">topicCounts</a> *tc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">topic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a8fe14c5595b71fd856197e198ea67196">get_counts</a> (atomic&lt; topic_t &gt; *tc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">word_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a18f351c45c28ebc4be0f0d3df001fde4">get_num_words</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">topic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a443c1fcce5b88993cea9891137f9f5fa">get_num_topics</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">word_mutex_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a109fdf5a24f0dc898d828e5ebe55e34f">get_lock</a> (word_t word)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pair&lt; <a class="el" href="class_top_k_list.html">TopKList</a> **, <a class="el" href="class_top_k_list.html">TopKList</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a0a41df650f7c2975f7517d02deb6d868">get_topic_stats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a8d29734547e3cbe1936282967b62c9e7">replace</a> (word_t word, <a class="el" href="struct_topic_counts.html">topicCounts</a> &amp;tc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a6ccff3b11d661503a45bc382411af9ad">upd_count</a> (word_t word, topic_t old_topic, topic_t new_topic, bool ignore_old_topic=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a4cdeb79b31cc51bf74b0cf2824aad62d">upd_count</a> (word_t word, <a class="el" href="types_8h.html#a4fed6ff282eca8f2c6ebdb4bc2e99e8b">mapped_vec</a> delta, string dbg=&quot;&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#aca203c070ed5c7338ebfe7b2b2574ae4">equal</a> (const <a class="el" href="class_type_topic_counts.html">TypeTopicCounts</a> &amp;expected)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a8aecfbf940bbc235954488ef3d107075">print</a> (word_t word)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a126d74c21ec8eda16a875711b9879f86">print</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a0f6527f9f996e4e39859a6cb266ebf12">initialize</a> (<a class="el" href="struct_topic_counts.html">topicCounts</a> *wtc, atomic&lt; topic_t &gt; *tc, word_t word=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#ab788633dc25d325dc47bd333b87ae574">initialize</a> (<a class="el" href="struct_topic_counts.html">topicCounts</a> **wtc, atomic&lt; topic_t &gt; *tc)</td></tr>
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static pair&lt; int, float &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a050a1b09ad130d2ac048511df424e53b">estimate_fit</a> (string fname, <a class="el" href="class_word_index_dictionary.html">WordIndexDictionary</a> *dict)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static pair&lt; int, float &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#ae32981836e13dd9a54bfd79224063a12">estimate_fit</a> (string fname, float used_memory, int &amp;incoming_words)</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#ab69a6701ed9e110f9c5ac25e933899ec">estimate_memoryn_warn</a> (long num_elems)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a0e039d80803bd0d1310d8d34478651ec">clear_stats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a6eb9abe7c1ca5cfeaf15d49b910fd24f">init</a> (topic_t num_topics_)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a0ed91f07819b6534de5592d22e6278d3">destroy</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">atomic&lt; topic_t &gt; *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#ab1fcbc4b5558d7d8df4404d5db290e8d">tokens_per_topic</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">topic_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a11093a2580f604279b5799ef494a8e66">num_topics</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_top_k_list.html">TopKList</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a1fd0fdd37107d5837fe5cc78191f5e8a">topic_stats</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_top_k_list.html">TopKList</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#aa31724ba039f4e58d2ac2d3344b94d46">top_topics</a></td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_type_topic_counts.html#a262cd29ee3b1d36569101e365d04b725">Memcached_Synchronizer</a></td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a461c45af231cb3a4c6c116eb9daa5ee5"></a><!-- doxytag: member="TypeTopicCounts::TypeTopicCounts" ref="a461c45af231cb3a4c6c116eb9daa5ee5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TypeTopicCounts::TypeTopicCounts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Construct an empty Word_Topic Counts table </p>

</div>
</div>
<a class="anchor" id="a199efa3085b514a0e155e24d807fe749"></a><!-- doxytag: member="TypeTopicCounts::TypeTopicCounts" ref="a199efa3085b514a0e155e24d807fe749" args="(word_t num_words, topic_t num_topics)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TypeTopicCounts::TypeTopicCounts </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>num_words_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">topic_t&nbsp;</td>
          <td class="paramname"> <em>num_topics_</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs a Word Topic Counts table that will have num_words_ unique words and each word can be assigned a maximum of num_topics_ topics </p>

</div>
</div>
<a class="anchor" id="a96bfd72683e9d117836c6118e62f2957"></a><!-- doxytag: member="TypeTopicCounts::~TypeTopicCounts" ref="a96bfd72683e9d117836c6118e62f2957" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TypeTopicCounts::~TypeTopicCounts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0e039d80803bd0d1310d8d34478651ec"></a><!-- doxytag: member="TypeTopicCounts::clear_stats" ref="a0e039d80803bd0d1310d8d34478651ec" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::clear_stats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears all the topic statistics </p>

</div>
</div>
<a class="anchor" id="a0ed91f07819b6534de5592d22e6278d3"></a><!-- doxytag: member="TypeTopicCounts::destroy" ref="a0ed91f07819b6534de5592d22e6278d3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::destroy </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad5b4a0efaccdf397d696ef3a59ff5bc5"></a><!-- doxytag: member="TypeTopicCounts::dump" ref="ad5b4a0efaccdf397d696ef3a59ff5bc5" args="(string fname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::dump </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>fname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Use the <a class="el" href="class_document_writer.html">DocumentWriter</a> to dump the topicCounts and the n(t) into a dump file (fname). Writes num_words topicCounts vectors and then n(t) </p>

</div>
</div>
<a class="anchor" id="aca203c070ed5c7338ebfe7b2b2574ae4"></a><!-- doxytag: member="TypeTopicCounts::equal" ref="aca203c070ed5c7338ebfe7b2b2574ae4" args="(const TypeTopicCounts &amp;expected)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TypeTopicCounts::equal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_type_topic_counts.html">TypeTopicCounts</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>expected</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af81d800d17306cb9f53e5bfe0ba49094"></a><!-- doxytag: member="TypeTopicCounts::estimate_alphas" ref="af81d800d17306cb9f53e5bfe0ba49094" args="(double *alphas, double &amp;alpha_sum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::estimate_alphas </td>
          <td>(</td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>alphas</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&nbsp;</td>
          <td class="paramname"> <em>alpha_sum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae32981836e13dd9a54bfd79224063a12"></a><!-- doxytag: member="TypeTopicCounts::estimate_fit" ref="ae32981836e13dd9a54bfd79224063a12" args="(string fname, float used_memory, int &amp;incoming_words)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pair&lt; int, float &gt; TypeTopicCounts::estimate_fit </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>used_memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&nbsp;</td>
          <td class="paramname"> <em>incoming_words</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a050a1b09ad130d2ac048511df424e53b"></a><!-- doxytag: member="TypeTopicCounts::estimate_fit" ref="a050a1b09ad130d2ac048511df424e53b" args="(string fname, WordIndexDictionary *dict)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pair&lt; int, float &gt; TypeTopicCounts::estimate_fit </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_word_index_dictionary.html">WordIndexDictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>dict</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab69a6701ed9e110f9c5ac25e933899ec"></a><!-- doxytag: member="TypeTopicCounts::estimate_memoryn_warn" ref="ab69a6701ed9e110f9c5ac25e933899ec" args="(long num_elems)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::estimate_memoryn_warn </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>num_elems</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Used to estimate the amount of memory being used while initializing this structure in order to warn if it exceeds WARN_MEMORY_SIZE and fail if it exceeds MAX_MEMORY_USAGE </p>

</div>
</div>
<a class="anchor" id="a8fe14c5595b71fd856197e198ea67196"></a><!-- doxytag: member="TypeTopicCounts::get_counts" ref="a8fe14c5595b71fd856197e198ea67196" args="(atomic&lt; topic_t &gt; *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">topic_t TypeTopicCounts::get_counts </td>
          <td>(</td>
          <td class="paramtype">atomic&lt; topic_t &gt; *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The memory for tc is assumed to be allocated. This method just copies the n(t) into tc </p>

</div>
</div>
<a class="anchor" id="af6811be58a729eed6909236f0c22c554"></a><!-- doxytag: member="TypeTopicCounts::get_counts" ref="af6811be58a729eed6909236f0c22c554" args="(word_t word, topicCounts *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">topic_t TypeTopicCounts::get_counts </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_topic_counts.html">topicCounts</a> *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The memory for topicCounts is assumed to have been allocated This method then just copied the topicCounts vector from the table into tc </p>

</div>
</div>
<a class="anchor" id="a109fdf5a24f0dc898d828e5ebe55e34f"></a><!-- doxytag: member="TypeTopicCounts::get_lock" ref="a109fdf5a24f0dc898d828e5ebe55e34f" args="(word_t word)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">word_mutex_t * TypeTopicCounts::get_lock </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If you want to lock the structure externally, you can get the lock that controls access to the word by this method Method: word_mutex_t::scoped_lock lock(*get_lock(word), false); </p>

</div>
</div>
<a class="anchor" id="a443c1fcce5b88993cea9891137f9f5fa"></a><!-- doxytag: member="TypeTopicCounts::get_num_topics" ref="a443c1fcce5b88993cea9891137f9f5fa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">topic_t TypeTopicCounts::get_num_topics </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of topics being learnt </p>

</div>
</div>
<a class="anchor" id="a18f351c45c28ebc4be0f0d3df001fde4"></a><!-- doxytag: member="TypeTopicCounts::get_num_words" ref="a18f351c45c28ebc4be0f0d3df001fde4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">word_t TypeTopicCounts::get_num_words </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The number of unique words for which the topic counts are maintained </p>

</div>
</div>
<a class="anchor" id="a0a41df650f7c2975f7517d02deb6d868"></a><!-- doxytag: member="TypeTopicCounts::get_topic_stats" ref="a0a41df650f7c2975f7517d02deb6d868" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pair&lt; <a class="el" href="class_top_k_list.html">TopKList</a> **, <a class="el" href="class_top_k_list.html">TopKList</a> * &gt; TypeTopicCounts::get_topic_stats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the TopicStats per topic &amp; the hot/top NUM_TOP_TOPICS topics. Used to print the topic stats for the top topics </p>

</div>
</div>
<a class="anchor" id="a6eb9abe7c1ca5cfeaf15d49b910fd24f"></a><!-- doxytag: member="TypeTopicCounts::init" ref="a6eb9abe7c1ca5cfeaf15d49b910fd24f" args="(topic_t num_topics_)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::init </td>
          <td>(</td>
          <td class="paramtype">topic_t&nbsp;</td>
          <td class="paramname"> <em>num_topics_</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab788633dc25d325dc47bd333b87ae574"></a><!-- doxytag: member="TypeTopicCounts::initialize" ref="ab788633dc25d325dc47bd333b87ae574" args="(topicCounts **wtc, atomic&lt; topic_t &gt; *tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_topic_counts.html">topicCounts</a> **&nbsp;</td>
          <td class="paramname"> <em>wtc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atomic&lt; topic_t &gt; *&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize using and array of topicCounts. Used in testing. Refer TypeTopicCountsTest.cpp </p>

</div>
</div>
<a class="anchor" id="a0f6527f9f996e4e39859a6cb266ebf12"></a><!-- doxytag: member="TypeTopicCounts::initialize" ref="a0f6527f9f996e4e39859a6cb266ebf12" args="(topicCounts *wtc, atomic&lt; topic_t &gt; *tc, word_t word=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_topic_counts.html">topicCounts</a> *&nbsp;</td>
          <td class="paramname"> <em>wtc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">atomic&lt; topic_t &gt; *&nbsp;</td>
          <td class="paramname"> <em>tc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the structure using explicit topicCounts for word. Used in testing. Refer TypeTopicCountsTest.cpp </p>

</div>
</div>
<a class="anchor" id="a1e51d6aa7ceb480b3b1e1a2e598a2486"></a><!-- doxytag: member="TypeTopicCounts::initialize_from_docs" ref="a1e51d6aa7ceb480b3b1e1a2e598a2486" args="(string wfname, string tfname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::initialize_from_docs </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>wfname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>tfname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads documents using <a class="el" href="class_document_reader.html">DocumentReader</a>. For each document and for each word encountered, it updates the topic counts for that word based on the topic assignment. </p>

</div>
</div>
<a class="anchor" id="a71ca87bf1f9cf612323f792594d3de29"></a><!-- doxytag: member="TypeTopicCounts::initialize_from_dump" ref="a71ca87bf1f9cf612323f792594d3de29" args="(string fname, WordIndexDictionary *local_dict=NULL, WordIndexDictionary *global_dict=NULL, size_t offset=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TypeTopicCounts::initialize_from_dump </td>
          <td>(</td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_word_index_dictionary.html">WordIndexDictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>local_dict</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_word_index_dictionary.html">WordIndexDictionary</a> *&nbsp;</td>
          <td class="paramname"> <em>global_dict</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>offset</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads the serialize dump (fname) in the protobuffere format into memory. The dump is generated using <a class="el" href="class_type_topic_counts.html#ad5b4a0efaccdf397d696ef3a59ff5bc5">dump()</a> method. The <a class="el" href="class_document_reader.html">DocumentReader</a> is used to read from the protobuf format dump file. There will be num_words entries in the dump for topicCounts and the last entry is the n(t). So first we read num_words topicCounts &amp; then n(t) </p>

</div>
</div>
<a class="anchor" id="a54768567ed8fbf4cd34f2ff7a5222190"></a><!-- doxytag: member="TypeTopicCounts::initialize_from_string" ref="a54768567ed8fbf4cd34f2ff7a5222190" args="(word_t word, string &amp;counts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::initialize_from_string </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;&nbsp;</td>
          <td class="paramname"> <em>counts</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae8c2f500e74a2f6a6bb1f6e830c66142"></a><!-- doxytag: member="TypeTopicCounts::initialize_from_ttc" ref="ae8c2f500e74a2f6a6bb1f6e830c66142" args="(TypeTopicCounts *ttc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::initialize_from_ttc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_type_topic_counts.html">TypeTopicCounts</a> *&nbsp;</td>
          <td class="paramname"> <em>ttc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a126d74c21ec8eda16a875711b9879f86"></a><!-- doxytag: member="TypeTopicCounts::print" ref="a126d74c21ec8eda16a875711b9879f86" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::print </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dump the structure to log(INFO) </p>

</div>
</div>
<a class="anchor" id="a8aecfbf940bbc235954488ef3d107075"></a><!-- doxytag: member="TypeTopicCounts::print" ref="a8aecfbf940bbc235954488ef3d107075" args="(word_t word)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string TypeTopicCounts::print </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8d29734547e3cbe1936282967b62c9e7"></a><!-- doxytag: member="TypeTopicCounts::replace" ref="a8d29734547e3cbe1936282967b62c9e7" args="(word_t word, topicCounts &amp;tc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::replace </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_topic_counts.html">topicCounts</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>tc</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Replace the counts for this word with those in tc </p>

</div>
</div>
<a class="anchor" id="a4cdeb79b31cc51bf74b0cf2824aad62d"></a><!-- doxytag: member="TypeTopicCounts::upd_count" ref="a4cdeb79b31cc51bf74b0cf2824aad62d" args="(word_t word, mapped_vec delta, string dbg=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::upd_count </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a4fed6ff282eca8f2c6ebdb4bc2e99e8b">mapped_vec</a>&nbsp;</td>
          <td class="paramname"> <em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&nbsp;</td>
          <td class="paramname"> <em>dbg</em> = <code>&quot;&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Update the counts for word using the delta map. The map contains the topic to count deltas. A lock is obtained on the word and is delegated to the relevant topicCounts Used by the background synchronizers </p>

</div>
</div>
<a class="anchor" id="a6ccff3b11d661503a45bc382411af9ad"></a><!-- doxytag: member="TypeTopicCounts::upd_count" ref="a6ccff3b11d661503a45bc382411af9ad" args="(word_t word, topic_t old_topic, topic_t new_topic, bool ignore_old_topic=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TypeTopicCounts::upd_count </td>
          <td>(</td>
          <td class="paramtype">word_t&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">topic_t&nbsp;</td>
          <td class="paramname"> <em>old_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">topic_t&nbsp;</td>
          <td class="paramname"> <em>new_topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>ignore_old_topic</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Main update used by the updater filter. Decrements the old_topic counts by 1 and increments the new_topic counts by 1 for word. Acquire a lock. Find the old and new topic locations and update them using the topicCounts vector's methods. However the decrement and increment methods take an index and do fast updates. So there is some pointer arithmetic going on here to find the index into the vector using the position pointers. Also note that the basic structure used has the topic and count packed in a 64 bit integer. So whenever we want to refer to the topic or count individually we need to multiply or divide by 2 </p>

</div>
</div>
<a class="anchor" id="adc1724643b2210fce240202fdfc5144c"></a><!-- doxytag: member="TypeTopicCounts::verify_header" ref="adc1724643b2210fce240202fdfc5144c" args="(DocumentReader &amp;doc_rdr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TypeTopicCounts::verify_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_document_reader.html">DocumentReader</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>doc_rdr</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a262cd29ee3b1d36569101e365d04b725"></a><!-- doxytag: member="TypeTopicCounts::Memcached_Synchronizer" ref="a262cd29ee3b1d36569101e365d04b725" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class Memcached_Synchronizer<code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a11093a2580f604279b5799ef494a8e66"></a><!-- doxytag: member="TypeTopicCounts::num_topics" ref="a11093a2580f604279b5799ef494a8e66" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">topic_t <a class="el" href="class_type_topic_counts.html#a11093a2580f604279b5799ef494a8e66">TypeTopicCounts::num_topics</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab1fcbc4b5558d7d8df4404d5db290e8d"></a><!-- doxytag: member="TypeTopicCounts::tokens_per_topic" ref="ab1fcbc4b5558d7d8df4404d5db290e8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">atomic&lt;topic_t&gt;* <a class="el" href="class_type_topic_counts.html#ab1fcbc4b5558d7d8df4404d5db290e8d">TypeTopicCounts::tokens_per_topic</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa31724ba039f4e58d2ac2d3344b94d46"></a><!-- doxytag: member="TypeTopicCounts::top_topics" ref="aa31724ba039f4e58d2ac2d3344b94d46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_top_k_list.html">TopKList</a> * <a class="el" href="class_type_topic_counts.html#aa31724ba039f4e58d2ac2d3344b94d46">TypeTopicCounts::top_topics</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1fd0fdd37107d5837fe5cc78191f5e8a"></a><!-- doxytag: member="TypeTopicCounts::topic_stats" ref="a1fd0fdd37107d5837fe5cc78191f5e8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_top_k_list.html">TopKList</a>** <a class="el" href="class_type_topic_counts.html#a1fd0fdd37107d5837fe5cc78191f5e8a">TypeTopicCounts::topic_stats</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/Unigram_Model/TopicLearner/<a class="el" href="_type_topic_counts_8h_source.html">TypeTopicCounts.h</a></li>
<li>src/Unigram_Model/TopicLearner/<a class="el" href="_type_topic_counts_8cpp.html">TypeTopicCounts.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed May 25 15:17:04 2011 for Y!LDA by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
